{"ast":null,"code":"import { BigNumber } from '@ethersproject/bignumber';\nimport { ContractFactory } from '@ethersproject/contracts';\nimport { JSBI, Percent, Router, TradeType } from '@uniswap/sdk';\nimport { useMemo } from 'react';\nimport { BIPS_BASE, INITIAL_ALLOWED_SLIPPAGE } from '../constants';\nimport { getTradeVersion, useV1TradeExchangeAddress } from '../data/V1';\nimport { useTransactionAdder } from '../state/transactions/hooks';\nimport { calculateGasMargin, getRouterContract, isAddress, shortenAddress } from '../utils';\nimport isZero from '../utils/isZero';\nimport v1SwapArguments from '../utils/v1SwapArguments';\nimport { useActiveWeb3React } from './index';\nimport { useLuniClaimContract, useLuniOrderContract, useV1ExchangeContract, useLuniPriceContract } from './useContract'; //import useTransactionDeadline from './useTransactionDeadline'\n\nimport useENS from './useENS';\nimport { Version } from './useToggledVersion';\nimport { useOrderListContract } from './useContract';\nimport { luniOrder } from '../data/luniOrder'; //import {luniClaim} from '../data/luniClaim'\n\nimport { OrderList } from '../data/OrderList'; //import { luniPrice } from '../data/luniPrice'\n// import { LUNIPRICE_BYTECODE} from '../constants/abis/luniprice'\n\nimport { utils } from 'ethers';\nimport { LUNIORDER_ABI, LUNIORDER_BYTECODE } from '../constants/abis/luniorder'; //import { report } from 'process'\n//import DeadlineInput from '../components/DeadlineInput'\n\nexport let OrderListCallbackState;\n\n(function (OrderListCallbackState) {\n  OrderListCallbackState[OrderListCallbackState[\"INVALID\"] = 0] = \"INVALID\";\n  OrderListCallbackState[OrderListCallbackState[\"LOADING\"] = 1] = \"LOADING\";\n  OrderListCallbackState[OrderListCallbackState[\"VALID\"] = 2] = \"VALID\";\n})(OrderListCallbackState || (OrderListCallbackState = {}));\n\n/**\n * Returns the swap calls that can be used to make the trade\n * @param trade trade to execute\n * @param allowedSlippage user allowed slippage\n * @param recipientAddressOrName\n */\nfunction useOrderListArgs(trade, // trade to execute, required\nallowedSlippage = INITIAL_ALLOWED_SLIPPAGE, // in bips\nrecipientAddressOrName, // the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\ndeadline) {\n  const {\n    account,\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const {\n    address: recipientAddress\n  } = useENS(recipientAddressOrName);\n  const recipient = recipientAddressOrName === null ? account : recipientAddress; // const deadline = useTransactionDeadline()\n\n  const v1Exchange = useV1ExchangeContract(useV1TradeExchangeAddress(trade), true);\n  return useMemo(() => {\n    const tradeVersion = getTradeVersion(trade);\n    if (!trade || !recipient || !library || !account || !tradeVersion || !chainId || !deadline) return [];\n    const contract = tradeVersion === Version.v2 ? getRouterContract(chainId, library, account) : v1Exchange;\n\n    if (!contract) {\n      return [];\n    }\n\n    const swapMethods = []; // const orderListMethods = []\n    // const luniClaimMethods = []\n    // const luniOrderMethods = []\n    // const data = \"\";\n    // const pair = \"\";\n    // const price = \"\";\n    // const deadline = \"\";\n    // const amount = \"\";\n    // const item: OrderListItem = (data:OrderListItem[\"data\"],pair:OrderListItem[\"pair\"],price:OrderListItem[\"price\"],_deadline:OrderListItem[\"deadline\"],amount:OrderListItem[\"amount\"]) =>{\n    //     item.data = data;\n    //     item.pair = pair;\n    //     item.price = price; \n    // };\n\n    switch (tradeVersion) {\n      case Version.v2:\n        swapMethods.push(Router.swapCallParameters(trade, {\n          feeOnTransfer: false,\n          allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n          recipient,\n          deadline: deadline\n        })); // luniOrderMethods.push(\n        //   LuniOrder.orderListParameters(trade,{\n        //     feeOnTransfer: false,\n        //     allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n        //     recipient,\n        //     deadline: deadline.toNumber()\n        //   })\n        // )\n        //luni order to call later\n        //const L_Order = new luniOrder(deadline, trade.route.pairs, trade.inputAmount, trade.outputAmount);\n        //claim to add to list\n        //const L_Claim = new luniClaim();\n        //orderListMethods.push(L_Order);\n        //luniClaimMethods.push(L_Claim);\n        //luniOrderMethods.push(L_Order);\n        //const orderList = new OrderList();\n        //const order = new OrderListItem(2,'',2,'',2,'');\n        //orderList.addOrder(order);\n        //console.log(orderList);\n\n        if (trade.tradeType === TradeType.EXACT_INPUT) {\n          swapMethods.push(Router.swapCallParameters(trade, {\n            feeOnTransfer: true,\n            allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n            recipient,\n            deadline: deadline\n          }));\n        }\n\n        break;\n\n      case Version.v1:\n        swapMethods.push(v1SwapArguments(trade, {\n          allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n          recipient,\n          deadline: deadline\n        }));\n        break;\n    } // return swapMethods.map(parameters => ({ parameters, contract })), orderListMethods.map(parameters => ({ parameters, contract })), luniClaimMethods.map(parameters => ({ parameters, contract })))\n\n\n    return swapMethods.map(parameters => ({\n      parameters,\n      contract\n    }));\n  }, [account, allowedSlippage, chainId, deadline, library, recipient, trade, v1Exchange]);\n}\n\nfunction makeOrderCallArgs(trade, sender, luni, deadline) {\n  const order = new luniOrder(BigNumber.from(123), trade === null || trade === void 0 ? void 0 : trade.route.pairs, trade === null || trade === void 0 ? void 0 : trade.inputAmount, trade === null || trade === void 0 ? void 0 : trade.executionPrice);\n  const list = retrieveOrderList(luni);\n  return {\n    order: order,\n    list: list\n  };\n}\n\nfunction retrieveOrderList(orderListContract) {\n  //get the current on chain orderList\n  return new OrderList(orderListContract);\n} // returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\n\n\nexport function useOrderListCallback(trade, // trade to execute, required\nallowedSlippage = INITIAL_ALLOWED_SLIPPAGE, // in bips\nrecipientAddressOrName, // the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\ndeadline) {\n  //library is the provider\n  const {\n    account,\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const {\n    address: recipientAddress\n  } = useENS(recipientAddressOrName);\n  const recipient = recipientAddressOrName === null ? account : recipientAddress;\n  const swapCalls = useOrderListArgs(trade, allowedSlippage, recipientAddressOrName, deadline);\n  const addTransaction = useTransactionAdder(); //creates an object that holds all of the contracts for luniswap\n\n  const orderListContract = useOrderListContract();\n  const luniClaimContract = useLuniClaimContract();\n  const luniOrderContract = useLuniOrderContract();\n  const luniPriceContract = useLuniPriceContract();\n  const luniSwap = {\n    luniOrder: luniOrderContract,\n    orderList: orderListContract,\n    luniClaim: luniClaimContract,\n    luniPrice: luniPriceContract\n  }; // luniOrderFactory.deploy(deadline, pair, amount, price)\n\n  const gasTest = testCalls(luniSwap, addTransaction, 1, recipient, library);\n  console.log(\"GAS PRICE:   \");\n  console.log(gasTest); //luniSwap.luniOrder.deploy();\n\n  console.log(luniSwap); //gets the current on chain order list for luniswap\n\n  const orderList = retrieveOrderList(luniSwap.orderList); //create a object for calling luniswap\n\n  const limitCalls = makeOrderCallArgs(trade, account, orderListContract, '20');\n  console.log(orderList);\n  console.log(limitCalls); //contract.callStatic[methodName](...args, options).then(result =>{\n  //\n  //})\n\n  return useMemo(() => {\n    if (!trade || !library || !account || !chainId) {\n      return {\n        state: OrderListCallbackState.INVALID,\n        callback: null,\n        error: 'Missing dependencies'\n      };\n    }\n\n    if (!recipient) {\n      if (recipientAddressOrName !== null) {\n        return {\n          state: OrderListCallbackState.INVALID,\n          callback: null,\n          error: 'Invalid recipient'\n        };\n      } else {\n        return {\n          state: OrderListCallbackState.LOADING,\n          callback: null,\n          error: null\n        };\n      }\n    }\n\n    const tradeVersion = getTradeVersion(trade);\n    return {\n      state: OrderListCallbackState.VALID,\n      callback: async function onSwap() {\n        const estimatedCalls = await Promise.all( //useOrderListArgs and map to contract\n        swapCalls.map(call => {\n          const {\n            parameters: {\n              methodName,\n              args,\n              value\n            },\n            contract\n          } = call; //checks to see if any tokens have been sent with the transaction\n\n          const options = !value || isZero(value) ? {} : {\n            value\n          }; //estimates the gas usage of the executing contract\n\n          return contract.estimateGas[methodName](...args, options).then(gasEstimate => {\n            return {\n              call,\n              gasEstimate\n            };\n          }).catch(gasError => {\n            console.debug('Gas estimate failed, trying eth_call to extract error', call);\n            return contract.callStatic[methodName](...args, options).then(result => {\n              console.debug('Unexpected successful call after failed estimate gas', call, gasError, result);\n              return {\n                call,\n                error: new Error('Unexpected issue with estimating the gas. Please try again.')\n              };\n            }).catch(callError => {\n              console.debug('Call threw error', call, callError);\n              let errorMessage;\n\n              switch (callError.reason) {\n                case 'UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT':\n                case 'UniswapV2Router: EXCESSIVE_INPUT_AMOUNT':\n                  errorMessage = 'This transaction will not succeed either due to price movement or fee on transfer. Try increasing your slippage tolerance.';\n                  break;\n\n                default:\n                  errorMessage = `The transaction cannot succeed due to error: ${callError.reason}. This is probably an issue with one of the tokens you are swapping.`;\n              }\n\n              return {\n                call,\n                error: new Error(errorMessage)\n              };\n            });\n          });\n        })); // a successful estimation is a bignumber gas estimate and the next call is also a bignumber gas estimate\n\n        const successfulEstimation = estimatedCalls.find((el, ix, list) => 'gasEstimate' in el && (ix === list.length - 1 || 'gasEstimate' in list[ix + 1]));\n\n        if (!successfulEstimation) {\n          const errorCalls = estimatedCalls.filter(call => 'error' in call);\n          if (errorCalls.length > 0) throw errorCalls[errorCalls.length - 1].error;\n          throw new Error('Unexpected error. Please contact support: none of the calls threw an error');\n        }\n\n        const {\n          call: {\n            contract,\n            parameters: {\n              methodName,\n              args,\n              value\n            }\n          },\n          gasEstimate\n        } = successfulEstimation;\n        return contract[methodName](...args, {\n          gasLimit: calculateGasMargin(gasEstimate),\n          ...(value && !isZero(value) ? {\n            value,\n            from: account\n          } : {\n            from: account\n          })\n        }).then(response => {\n          const inputSymbol = trade.inputAmount.currency.symbol;\n          const outputSymbol = trade.outputAmount.currency.symbol;\n          const inputAmount = trade.inputAmount.toSignificant(3);\n          const outputAmount = trade.outputAmount.toSignificant(3);\n          const base = `Swap ${inputAmount} ${inputSymbol} for ${outputAmount} ${outputSymbol}`;\n          const withRecipient = recipient === account ? base : `${base} to ${recipientAddressOrName && isAddress(recipientAddressOrName) ? shortenAddress(recipientAddressOrName) : recipientAddressOrName}`;\n          const withVersion = tradeVersion === Version.v2 ? withRecipient : `${withRecipient} on ${tradeVersion.toUpperCase()}`;\n          addTransaction(response, {\n            summary: withVersion\n          });\n          return response.hash;\n        }).catch(error => {\n          // if the user rejected the tx, pass this along\n          if ((error === null || error === void 0 ? void 0 : error.code) === 4001) {\n            throw new Error('Transaction rejected.');\n          } else {\n            // otherwise, the error was unexpected and we need to convey that\n            console.error(`Swap failed`, error, methodName, args, value);\n            throw new Error(`Swap failed: ${error.message}`);\n          }\n        });\n      },\n      error: null\n    };\n  }, [trade, library, account, chainId, recipient, recipientAddressOrName, swapCalls, addTransaction]);\n} // interface addHeadResponse{\n//   id: BigNumber,\n//   data: string,\n//   deadline: BigNumber,\n//   amount: BigNumber,\n//   price: BigNumber,\n//   pair: string,\n//   sender: string\n// }\n\nasync function testCalls(luniSwap, addTransaction, id, recipient, library) {\n  //const callID:BigNumber = BigNumber.from(id);\n  // const getByID = await luniSwap.orderList.callStatic[\"get\"](callID).then(\n  //   (response: any) =>{\n  //     //addTransaction(response,{\n  //     //  summary: Version.v2\n  //     //})\n  //     const addHead: addHeadResponse = {\n  //       id: BigNumber.from(response[0]),\n  //       data: response[1],\n  //       deadline: BigNumber.from(response[2]),\n  //       amount: BigNumber.from(response[3]),\n  //       price: BigNumber.from(response[4]),\n  //       pair: response[5],\n  //       sender: response[6]\n  //     };\n  //     console.log(addHead)\n  //     console.log(response)\n  //     return response\n  //   }\n  // );\n  const luniOrderFactory = new ContractFactory(new utils.Interface(LUNIORDER_ABI), LUNIORDER_BYTECODE, library.getSigner());\n  const contract = await luniOrderFactory.deploy(1603742574, 0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa, 1000000000000000000, 250000000000000000);\n  console.log(\"CONTRACT ADDRESS: \" + contract.address);\n  console.log(\"CONTRACT Transaction: \" + contract.deployTransaction);\n  contract.deployTransaction.wait();\n  console.log(contract.value());\n  const gasOrderList = await luniSwap.orderList.callStatic[\"objects\"]('0').then(response => {\n    return response;\n  }); // const findByData = await luniSwap.orderList.callStatic[\"findIdForData\"]('0').then(\n  //   (response: any) =>{\n  //     return response\n  //   }\n  // );\n  // console.log(findByData);\n  // const luniOrder = await luniSwap.luniOrder.deploy\n  // const addOrderToList = await  luniSwap.orderList.callStatic[\"addHead\"]().then(\n  // )\n  //console.log(getByID)\n\n  console.log(\"OBJECTS\");\n  console.log(gasOrderList);\n  return gasOrderList;\n}","map":{"version":3,"sources":["/home/devpc/LoonySwap/uniswap-interface/src/hooks/useOrderListCallback.ts"],"names":["BigNumber","ContractFactory","JSBI","Percent","Router","TradeType","useMemo","BIPS_BASE","INITIAL_ALLOWED_SLIPPAGE","getTradeVersion","useV1TradeExchangeAddress","useTransactionAdder","calculateGasMargin","getRouterContract","isAddress","shortenAddress","isZero","v1SwapArguments","useActiveWeb3React","useLuniClaimContract","useLuniOrderContract","useV1ExchangeContract","useLuniPriceContract","useENS","Version","useOrderListContract","luniOrder","OrderList","utils","LUNIORDER_ABI","LUNIORDER_BYTECODE","OrderListCallbackState","useOrderListArgs","trade","allowedSlippage","recipientAddressOrName","deadline","account","chainId","library","address","recipientAddress","recipient","v1Exchange","tradeVersion","contract","v2","swapMethods","push","swapCallParameters","feeOnTransfer","BigInt","tradeType","EXACT_INPUT","v1","map","parameters","makeOrderCallArgs","sender","luni","order","from","route","pairs","inputAmount","executionPrice","list","retrieveOrderList","orderListContract","useOrderListCallback","swapCalls","addTransaction","luniClaimContract","luniOrderContract","luniPriceContract","luniSwap","orderList","luniClaim","luniPrice","gasTest","testCalls","console","log","limitCalls","state","INVALID","callback","error","LOADING","VALID","onSwap","estimatedCalls","Promise","all","call","methodName","args","value","options","estimateGas","then","gasEstimate","catch","gasError","debug","callStatic","result","Error","callError","errorMessage","reason","successfulEstimation","find","el","ix","length","errorCalls","filter","gasLimit","response","inputSymbol","currency","symbol","outputSymbol","outputAmount","toSignificant","base","withRecipient","withVersion","toUpperCase","summary","hash","code","message","id","luniOrderFactory","Interface","getSigner","deploy","deployTransaction","wait","gasOrderList"],"mappings":"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","sourcesContent":["import { BigNumber } from '@ethersproject/bignumber'\nimport {BigNumberish} from 'ethers'\nimport { Contract, ContractFactory } from '@ethersproject/contracts'\nimport { JSBI, Percent, Router, SwapParameters, Trade, TradeType } from '@uniswap/sdk'\nimport { useMemo } from 'react'\nimport { BIPS_BASE, INITIAL_ALLOWED_SLIPPAGE } from '../constants'\nimport { getTradeVersion, useV1TradeExchangeAddress } from '../data/V1'\nimport { useTransactionAdder } from '../state/transactions/hooks'\nimport { calculateGasMargin, getRouterContract, isAddress, shortenAddress } from '../utils'\nimport isZero from '../utils/isZero'\nimport v1SwapArguments from '../utils/v1SwapArguments'\nimport { useActiveWeb3React } from './index'\nimport { useLuniClaimContract, useLuniOrderContract, useV1ExchangeContract, useLuniPriceContract } from './useContract'\n//import useTransactionDeadline from './useTransactionDeadline'\nimport useENS from './useENS'\nimport { Version } from './useToggledVersion'\nimport {useOrderListContract} from './useContract'\nimport { luniOrder} from '../data/luniOrder'\n//import {luniClaim} from '../data/luniClaim'\n\nimport {OrderList} from '../data/OrderList'\n//import { luniPrice } from '../data/luniPrice'\n// import { LUNIPRICE_BYTECODE} from '../constants/abis/luniprice'\nimport {utils} from 'ethers'\nimport {Web3Provider} from '@ethersproject/providers'\nimport { LUNIORDER_ABI, LUNIORDER_BYTECODE} from '../constants/abis/luniorder'\n//import { report } from 'process'\n//import DeadlineInput from '../components/DeadlineInput'\n\nexport enum OrderListCallbackState {\n  INVALID,\n  LOADING,\n  VALID\n}\n\ninterface SwapCall {\n  contract: Contract\n  parameters: SwapParameters | any\n}\n\ninterface SuccessfulCall {\n  call: SwapCall\n  gasEstimate: BigNumber\n}\n\ninterface FailedCall {\n  call: SwapCall\n  error: Error\n}\n\ntype EstimatedSwapCall = SuccessfulCall | FailedCall\n\n/**\n * Returns the swap calls that can be used to make the trade\n * @param trade trade to execute\n * @param allowedSlippage user allowed slippage\n * @param recipientAddressOrName\n */\nfunction useOrderListArgs(\n  trade: Trade | undefined, // trade to execute, required\n  allowedSlippage: number = INITIAL_ALLOWED_SLIPPAGE, // in bips\n  recipientAddressOrName: string | null ,// the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\n  deadline: number | null\n): SwapCall[] {\n  const { account, chainId, library } = useActiveWeb3React()\n\n  const { address: recipientAddress } = useENS(recipientAddressOrName)\n  const recipient = recipientAddressOrName === null ? account : recipientAddress\n  // const deadline = useTransactionDeadline()\n  \n  const v1Exchange = useV1ExchangeContract(useV1TradeExchangeAddress(trade), true)\n\n  return useMemo(() => {\n    const tradeVersion = getTradeVersion(trade)\n    \n    if (!trade || !recipient || !library || !account || !tradeVersion || !chainId || !deadline) return []\n\n    const contract: Contract | null =\n      tradeVersion === Version.v2 ? getRouterContract(chainId, library, account) : v1Exchange\n    if (!contract) {\n      return []\n    }\n\n    const swapMethods = []\n    // const orderListMethods = []\n    // const luniClaimMethods = []\n    // const luniOrderMethods = []\n\n\n    // const data = \"\";\n    // const pair = \"\";\n    // const price = \"\";\n    // const deadline = \"\";\n    // const amount = \"\";\n    \n    // const item: OrderListItem = (data:OrderListItem[\"data\"],pair:OrderListItem[\"pair\"],price:OrderListItem[\"price\"],_deadline:OrderListItem[\"deadline\"],amount:OrderListItem[\"amount\"]) =>{\n    //     item.data = data;\n    //     item.pair = pair;\n    //     item.price = price; \n    // };\n    switch (tradeVersion) {\n      case Version.v2:\n        \n        swapMethods.push(\n          Router.swapCallParameters(trade, {\n            feeOnTransfer: false,\n            allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n            recipient,\n            deadline: deadline\n          })\n        )\n        // luniOrderMethods.push(\n        //   LuniOrder.orderListParameters(trade,{\n        //     feeOnTransfer: false,\n        //     allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n        //     recipient,\n        //     deadline: deadline.toNumber()\n        //   })\n        // )\n\n\n        //luni order to call later\n        //const L_Order = new luniOrder(deadline, trade.route.pairs, trade.inputAmount, trade.outputAmount);\n        //claim to add to list\n        //const L_Claim = new luniClaim();\n        //orderListMethods.push(L_Order);\n        //luniClaimMethods.push(L_Claim);\n        //luniOrderMethods.push(L_Order);\n        //const orderList = new OrderList();\n        //const order = new OrderListItem(2,'',2,'',2,'');\n        //orderList.addOrder(order);\n        //console.log(orderList);\n\n        if (trade.tradeType === TradeType.EXACT_INPUT) {\n          swapMethods.push(\n            Router.swapCallParameters(trade, {\n              feeOnTransfer: true,\n              allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n              recipient,\n              deadline: deadline\n            })\n          )\n        }\n        break\n      case Version.v1:\n        swapMethods.push(\n          v1SwapArguments(trade, {\n            allowedSlippage: new Percent(JSBI.BigInt(allowedSlippage), BIPS_BASE),\n            recipient,\n            deadline: deadline\n          })\n        )\n        break\n    }\n    // return swapMethods.map(parameters => ({ parameters, contract })), orderListMethods.map(parameters => ({ parameters, contract })), luniClaimMethods.map(parameters => ({ parameters, contract })))\n    return swapMethods.map(parameters => ({ parameters, contract }))\n  }, [account, allowedSlippage, chainId, deadline, library, recipient, trade, v1Exchange])\n}\n\ninterface ILuniSwapOrder{\n  order:luniOrder,\n  list:OrderList\n}\n\ninterface ILuniSwap{\n  luniOrder:Contract,\n  orderList:Contract,\n  luniClaim:Contract,\n  luniPrice:Contract\n}\n\n\n\nfunction makeOrderCallArgs(\n  trade: Trade | undefined,\n  sender: string | null | undefined,\n  luni: Contract | null,\n  deadline: BigNumberish |undefined\n):ILuniSwapOrder{\n  \n  const order = new luniOrder(BigNumber.from(123), trade?.route.pairs, trade?.inputAmount, trade?.executionPrice)\n  const list = retrieveOrderList(luni)\n  return <ILuniSwapOrder>{\n    order: order,\n    list: list\n  }\n}\n\nfunction retrieveOrderList(orderListContract:Contract|null){\n  //get the current on chain orderList\n  return new OrderList(orderListContract);\n}\n\n// returns a function that will execute a swap, if the parameters are all valid\n// and the user has approved the slippage adjusted input amount for the trade\nexport function useOrderListCallback(\n  trade: Trade | undefined, // trade to execute, required\n  allowedSlippage: number = INITIAL_ALLOWED_SLIPPAGE, // in bips\n  recipientAddressOrName: string | null, // the ENS name or address of the recipient of the trade, or null if swap should be returned to sender\n  deadline:number|null\n): { state: OrderListCallbackState; callback: null | (() => Promise<string>); error: string | null } {\n  //library is the provider\n  const { account, chainId, library } = useActiveWeb3React()\n\n  const { address: recipientAddress } = useENS(recipientAddressOrName)\n  const recipient = recipientAddressOrName === null ? account : recipientAddress\n  \n  \n  const swapCalls = useOrderListArgs(trade, allowedSlippage, recipientAddressOrName, deadline)\n  \n  const addTransaction = useTransactionAdder()\n  \n\n  //creates an object that holds all of the contracts for luniswap\n  const orderListContract: Contract | null  = useOrderListContract()  \n  const luniClaimContract: Contract | null = useLuniClaimContract()\n  const luniOrderContract: Contract | null = useLuniOrderContract()\n  const luniPriceContract: Contract | null = useLuniPriceContract()\n  \n  const luniSwap:ILuniSwap = <ILuniSwap>{\n    \n    luniOrder: luniOrderContract,\n    orderList: orderListContract,\n    luniClaim: luniClaimContract,\n    luniPrice: luniPriceContract,\n  }\n\n  \n  \n  // luniOrderFactory.deploy(deadline, pair, amount, price)\n  \n\n\n  const gasTest = testCalls(luniSwap, addTransaction,1, recipient, library);\n  \n  console.log(\"GAS PRICE:   \" );\n  console.log(gasTest);\n  //luniSwap.luniOrder.deploy();\n  console.log(luniSwap);\n  //gets the current on chain order list for luniswap\n  const orderList = retrieveOrderList(luniSwap.orderList);  \n  //create a object for calling luniswap\n  const limitCalls = makeOrderCallArgs(trade, account,orderListContract,'20');\n  console.log(orderList);\n  console.log(limitCalls);\n\n  //contract.callStatic[methodName](...args, options).then(result =>{\n  //\n  //})\n\n\n  \n\n  \n\n  return useMemo(() => {\n    if (!trade || !library || !account || !chainId) {\n      return { state: OrderListCallbackState.INVALID, callback: null, error: 'Missing dependencies' }\n    }\n    if (!recipient) {\n      if (recipientAddressOrName !== null) {\n        return { state: OrderListCallbackState.INVALID, callback: null, error: 'Invalid recipient' }\n      } else {\n        return { state: OrderListCallbackState.LOADING, callback: null, error: null }\n      }\n    }\n\n    const tradeVersion = getTradeVersion(trade)\n\n    return {\n      state: OrderListCallbackState.VALID,\n      callback: async function onSwap(): Promise<string> {\n        const estimatedCalls: EstimatedSwapCall[] = await Promise.all(\n          //useOrderListArgs and map to contract\n          swapCalls.map(call => {\n            const {\n              parameters: { methodName, args, value },\n              contract\n            } = call\n            //checks to see if any tokens have been sent with the transaction\n            const options = !value || isZero(value) ? {} : { value }\n\n            //estimates the gas usage of the executing contract\n            return contract.estimateGas[methodName](...args, options)\n              .then(gasEstimate => {\n                return {\n                  call,\n                  gasEstimate\n                }\n              })\n              .catch(gasError => {\n                console.debug('Gas estimate failed, trying eth_call to extract error', call)\n\n                return contract.callStatic[methodName](...args, options)\n                  .then(result => {\n                    console.debug('Unexpected successful call after failed estimate gas', call, gasError, result)\n                    return { call, error: new Error('Unexpected issue with estimating the gas. Please try again.') }\n                  })\n                  .catch(callError => {\n                    console.debug('Call threw error', call, callError)\n                    let errorMessage: string\n                    switch (callError.reason) {\n                      case 'UniswapV2Router: INSUFFICIENT_OUTPUT_AMOUNT':\n                      case 'UniswapV2Router: EXCESSIVE_INPUT_AMOUNT':\n                        errorMessage =\n                          'This transaction will not succeed either due to price movement or fee on transfer. Try increasing your slippage tolerance.'\n                        break\n                      default:\n                        errorMessage = `The transaction cannot succeed due to error: ${callError.reason}. This is probably an issue with one of the tokens you are swapping.`\n                    }\n                    return { call, error: new Error(errorMessage) }\n                  })\n              })\n          })\n        )\n\n        // a successful estimation is a bignumber gas estimate and the next call is also a bignumber gas estimate\n        const successfulEstimation = estimatedCalls.find(\n          (el, ix, list): el is SuccessfulCall =>\n            'gasEstimate' in el && (ix === list.length - 1 || 'gasEstimate' in list[ix + 1])\n        )\n\n        if (!successfulEstimation) {\n          const errorCalls = estimatedCalls.filter((call): call is FailedCall => 'error' in call)\n          if (errorCalls.length > 0) throw errorCalls[errorCalls.length - 1].error\n          throw new Error('Unexpected error. Please contact support: none of the calls threw an error')\n        }\n\n        const {\n          call: {\n            contract,\n            parameters: { methodName, args, value }\n          },\n          gasEstimate\n        } = successfulEstimation\n\n        return contract[methodName](...args, {\n          gasLimit: calculateGasMargin(gasEstimate),\n          ...(value && !isZero(value) ? { value, from: account } : { from: account })\n        })\n          .then((response: any) => {\n            const inputSymbol = trade.inputAmount.currency.symbol\n            const outputSymbol = trade.outputAmount.currency.symbol\n            const inputAmount = trade.inputAmount.toSignificant(3)\n            const outputAmount = trade.outputAmount.toSignificant(3)\n\n            const base = `Swap ${inputAmount} ${inputSymbol} for ${outputAmount} ${outputSymbol}`\n            const withRecipient =\n              recipient === account\n                ? base\n                : `${base} to ${\n                    recipientAddressOrName && isAddress(recipientAddressOrName)\n                      ? shortenAddress(recipientAddressOrName)\n                      : recipientAddressOrName\n                  }`\n\n            const withVersion =\n              tradeVersion === Version.v2 ? withRecipient : `${withRecipient} on ${(tradeVersion as any).toUpperCase()}`\n\n            addTransaction(response, {\n              summary: withVersion\n            })\n\n            return response.hash\n          })\n          .catch((error: any) => {\n            // if the user rejected the tx, pass this along\n            if (error?.code === 4001) {\n              throw new Error('Transaction rejected.')\n            } else {\n              // otherwise, the error was unexpected and we need to convey that\n              console.error(`Swap failed`, error, methodName, args, value)\n              throw new Error(`Swap failed: ${error.message}`)\n            }\n          })\n      },\n      error: null\n    }\n  }, [trade, library, account, chainId, recipient, recipientAddressOrName, swapCalls, addTransaction])\n}\n\n\n// interface addHeadResponse{\n//   id: BigNumber,\n//   data: string,\n//   deadline: BigNumber,\n//   amount: BigNumber,\n//   price: BigNumber,\n//   pair: string,\n//   sender: string\n// }\n\nasync function testCalls(luniSwap:any, addTransaction:any,id:number, recipient:string|null|undefined, library:Web3Provider){\n  //const callID:BigNumber = BigNumber.from(id);\n  // const getByID = await luniSwap.orderList.callStatic[\"get\"](callID).then(\n  //   (response: any) =>{\n  //     //addTransaction(response,{\n  //     //  summary: Version.v2\n  //     //})\n  //     const addHead: addHeadResponse = {\n  //       id: BigNumber.from(response[0]),\n  //       data: response[1],\n  //       deadline: BigNumber.from(response[2]),\n  //       amount: BigNumber.from(response[3]),\n  //       price: BigNumber.from(response[4]),\n  //       pair: response[5],\n  //       sender: response[6]\n  //     };\n      \n  //     console.log(addHead)\n  //     console.log(response)\n  //     return response\n  //   }\n  // );\n  const luniOrderFactory: ContractFactory = new ContractFactory(new utils.Interface(LUNIORDER_ABI),LUNIORDER_BYTECODE, library.getSigner())\n  const contract = await luniOrderFactory.deploy(1603742574,0x4F96Fe3b7A6Cf9725f59d353F723c1bDb64CA6Aa,1000000000000000000,250000000000000000)\n  console.log(\"CONTRACT ADDRESS: \" + contract.address);\n  console.log(\"CONTRACT Transaction: \" + contract.deployTransaction);\n  contract.deployTransaction.wait();\n  console.log(contract.value());\n  const gasOrderList = await luniSwap.orderList.callStatic[\"objects\"]('0').then(\n    (response: any) =>{\n      return response\n    }\n  );\n\n  // const findByData = await luniSwap.orderList.callStatic[\"findIdForData\"]('0').then(\n  //   (response: any) =>{\n  //     return response\n  //   }\n  // );\n  // console.log(findByData);\n\n  // const luniOrder = await luniSwap.luniOrder.deploy\n\n\n\n\n\n  // const addOrderToList = await  luniSwap.orderList.callStatic[\"addHead\"]().then(\n\n  // )\n  //console.log(getByID)\n  console.log(\"OBJECTS\");\n  console.log(gasOrderList);\n  \n  return gasOrderList\n}\n"]},"metadata":{},"sourceType":"module"}